<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<!--Converted with LaTeX2HTML 96.1-h (September 30, 1996) by Nikos Drakos (nikos@cbl.leeds.ac.uk), CBLU, University of Leeds -->
<HTML>
<HEAD>
<TITLE>7.3 Functions</TITLE>
<META NAME="description" CONTENT="7.3 Functions">
<META NAME="keywords" CONTENT="apiref">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<LINK REL=STYLESHEET HREF="apiref.css">
</HEAD>
<BODY LANG="EN" >
 <A NAME="tex2html330" HREF="node9.html"><IMG WIDTH=37 HEIGHT=24 ALIGN=BOTTOM ALT="next" SRC="../icons/next_motif.gif"></A> <A NAME="tex2html328" HREF="node5.html"><IMG WIDTH=26 HEIGHT=24 ALIGN=BOTTOM ALT="up" SRC="../icons/up_motif.gif"></A> <A NAME="tex2html324" HREF="node7.html"><IMG WIDTH=63 HEIGHT=24 ALIGN=BOTTOM ALT="previous" SRC="../icons/previous_motif.gif"></A> <A NAME="tex2html332" HREF="node1.html"><IMG WIDTH=65 HEIGHT=24 ALIGN=BOTTOM ALT="contents" SRC="../icons/contents_motif.gif"></A>  <BR>
<B> Next:</B> <A NAME="tex2html331" HREF="node9.html">3 System control</A>
<B>Up:</B> <A NAME="tex2html329" HREF="node5.html">2 Configurationinitialization and </A>
<B> Previous:</B> <A NAME="tex2html325" HREF="node7.html">7.2 Data types</A>
<BR> <P>
<H1><A NAME="SECTION00330000000000000000">7.3 Functions</A></H1>
<P>
This section describes all functions available for MIDAS initialization
and configuration.
<P>
<BR> <HR><A NAME="MIDASclose">&#160;</A><H2><A NAME="SECTION00331000000000000000">2.3.1 MIDASclose</A></H2>
<A NAME="1363">&#160;</A>
<PRE>BOOL MIDASclose(void)</PRE>
<P>
Uninitializes MIDAS Digital Audio System.
<P>
<H3><A NAME="SECTION00331100000000000000">Input</A></H3>
<P>
None.
<P>
<H3><A NAME="SECTION00331200000000000000">Description</A></H3>
<P>
This function uninitializes all MIDAS Digital Audio System components,
deallocates all resources allocated, and shuts down all MIDAS processing. This
function must always be called before exiting under MS-DOS and is also
strongly recommended under other operating systems. After this function has
been called, no MIDAS function may be called unless MIDAS is initialized
again.
<P>
<H3><A NAME="SECTION00331300000000000000">Return value</A></H3>
<P>
TRUE if successful, FALSE if not.
<P>
<H3><A NAME="SECTION00331400000000000000">Operating systems</A></H3>
<P>
All
<P>
<H3><A NAME="SECTION00331500000000000000">See also</A></H3>
<P>
<A HREF="node8.html#MIDASinit">MIDASinit</A>
<P>
<BR> <HR><A NAME="MIDASconfig">&#160;</A><H2><A NAME="SECTION00332000000000000000">2.3.2 MIDASconfig</A></H2>
<A NAME="1370">&#160;</A> <PRE>BOOL MIDASconfig(void)</PRE>
<P>
Runs manual MIDAS setup.
<P>
<H3><A NAME="SECTION00332100000000000000">Input</A></H3>
<P>
None.
<P>
<H3><A NAME="SECTION00332200000000000000">Description</A></H3>
<P>
This function runs the manual MIDAS Digital Audio System configuration. It
queries the sound card to use and desired sound quality and output mode from
the user. The setup entered can be saved do disk with
<A HREF="node8.html#MIDASsaveConfig">MIDASsaveConfig</A> and loaded back with <A HREF="node8.html#MIDASloadConfig">MIDASloadConfig</A>, or
written to registry with <A HREF="node8.html#MIDASwriteConfigRegistry">MIDASwriteConfigRegistry</A> and read back with
<A HREF="node8.html#MIDASreadConfigRegistry">MIDASreadConfigRegistry</A>.  These functions can be used to create a
simple external setup program, or just save the settings between two runs of
the program. After this function has been called, <A HREF="node8.html#MIDASsetOption">MIDASsetOption</A> can
be used to change the output mode options, to, for example, force mono output.
<P>
This function returns TRUE if the setup was completed successfully, FALSE if
not. The setup can fail for two reasons: either the user aborted it by
pressing escape or clicking Cancel, or an error occured. As errors during the
setup are extremely unlikely, it is safe to simply exit the program if this
function returns FALSE. <A HREF="node12.html#MIDASgetLastError">MIDASgetLastError</A> can be used to check if an
error occured -- if the return value is zero, the user just pressed cancelled
the setup.
<P>
This function must be called before <A HREF="node8.html#MIDASinit">MIDASinit</A>, but after
<A HREF="node8.html#MIDASstartup">MIDASstartup</A>.
<P>
<H3><A NAME="SECTION00332300000000000000">Return value</A></H3>
<P>
TRUE if successful, FALSE if not (the user cancelled the configuration, or an
error occurred)
<P>
<H3><A NAME="SECTION00332400000000000000">Operating systems</A></H3>
<P>
MS-DOS, Win32
<P>
<H3><A NAME="SECTION00332500000000000000">See also</A></H3>
<P>
<A HREF="node8.html#MIDASsaveConfig">MIDASsaveConfig</A>, <A HREF="node8.html#MIDASloadConfig">MIDASloadConfig</A>,
<A HREF="node8.html#MIDASsetOption">MIDASsetOption</A>, <A HREF="node8.html#MIDASgetOption">MIDASgetOption</A>, <A HREF="node8.html#MIDASinit">MIDASinit</A>,
<A HREF="node8.html#MIDASwriteConfigRegistry">MIDASwriteConfigRegistry</A>, <A HREF="node8.html#MIDASreadConfigRegistry">MIDASreadConfigRegistry</A>
<P>
<BR> <HR><A NAME="MIDASdetectSoundCard">&#160;</A><H2><A NAME="SECTION00333000000000000000">2.3.3 MIDASdetectSoundCard</A></H2>
<A NAME="1433">&#160;</A> <PRE>BOOL MIDASdetectSoundCard(void)</PRE>
<P>
Attempts to detect the sound card to use.
<P>
<H3><A NAME="SECTION00333100000000000000">Input</A></H3>
<P>
None.
<P>
<H3><A NAME="SECTION00333200000000000000">Description</A></H3>
<P>
[MS-DOS only]
<P>
This function attempts to detect the sound card that should be used. It
will set up MIDAS to use the detected card, and return TRUE if a sound
card was found, FALSE if not. If this function returns FALSE, you should
run <A HREF="node8.html#MIDASconfig">MIDASconfig</A> to let the user manually select the sound
card. Note that you <B>can</B> use MIDAS even if no sound card has been
selected - MIDAS will just not play sound in that case.
<P>
If no sound card has been manually set up, <A HREF="node8.html#MIDASinit">MIDASinit</A> will
automatically detect it, or use No Sound if none is available. Therefore
this function does not have to be called if manual setup will not be
used.
<P>
Note that, as there is no way to safely autodetect the Windows Sound
System cards under MS-DOS, MIDAS will not attempt to detect them at all. If
you do not provide a manual setup possibility to your program (via
<A HREF="node8.html#MIDASconfig">MIDASconfig</A>), WSS users will not be able to get any sound. The
computer may also have several sound cards, and the user may wish not to
use the one automatically detected by MIDAS. Therefore it is a very good
idea to include an optional manual sound setup to all programs.
<P>
This discussion naturally applies to MS-DOS only, under Win32 and Linux
MIDAS uses the sound card through the system audio devices, and no sound
card selection or setup is necessary.
<P>
<H3><A NAME="SECTION00333300000000000000">Return value</A></H3>
<P>
TRUE if a sound card was detected, FALSE if not.
<P>
<H3><A NAME="SECTION00333400000000000000">Operating systems</A></H3>
<P>
MS-DOS
<P>
<H3><A NAME="SECTION00333500000000000000">See also</A></H3>
<P>
<A HREF="node8.html#MIDASconfig">MIDASconfig</A>, <A HREF="node8.html#MIDASinit">MIDASinit</A>
<P>
<BR> <HR><A NAME="MIDASgetDisplayRefreshRate">&#160;</A><H2><A NAME="SECTION00334000000000000000">2.3.4 MIDASgetDisplayRefreshRate</A></H2>
<A NAME="1456">&#160;</A> <PRE>DWORD MIDASgetDisplayRefreshRate(void)</PRE>
<P>
Gets the current display refresh rate.
<P>
<H3><A NAME="SECTION00334100000000000000">Input</A></H3>
<P>
None.
<P>
<H3><A NAME="SECTION00334200000000000000">Description</A></H3>
<P>
This function tries to determine the current display refresh rate. It is
used with <A HREF="node12.html#MIDASsetTimerCallbacks">MIDASsetTimerCallbacks</A> to set a display-synchronized
timer callback. It returns the current display refresh rate in
milliHertz (ie. 1000*Hz, 50Hz becomes 50000, 70Hz 70000 etc), or 0 if it
could not determine the refresh rate. The refresh rate may be
unavailable when running under Win95 or a similar OS, or when the VGA
card does return Vertical Retraces correctly (as some SVGA cards do in
SVGA modes). Therefore it is important to check the return value, and
substitute some default value if it is zero.
<P>
Unlike most other MIDAS functions, this function must be called <B>
before</B> <A HREF="node8.html#MIDASinit">MIDASinit</A> is called, as the MIDAS timer may interfere
with the measurements.
<P>
Note that the display refresh rate is <B>display mode
specific</B>. Therefore you need to set up the display mode with which you
want to use display-synchronized timer callbacks <B>before</B> calling
this function. Also, if your application uses several display modes, you
must get the display refresh rate for each mode separately, and remove
and restart the display-synchronized timer callbacks at each mode
change.
<P>
This function is only available in MS-DOS.
<P>
<H3><A NAME="SECTION00334300000000000000">Return value</A></H3>
<P>
The current display refresh rate, in milliHertz, or 0 if unavailable.
<P>
<H3><A NAME="SECTION00334400000000000000">Operating systems</A></H3>
<P>
MS-DOS
<P>
<H3><A NAME="SECTION00334500000000000000">See also</A></H3>
<P>
<A HREF="node12.html#MIDASsetTimerCallbacks">MIDASsetTimerCallbacks</A>
<P>
<BR> <HR><A NAME="MIDASgetOption">&#160;</A><H2><A NAME="SECTION00335000000000000000">2.3.5 MIDASgetOption</A></H2>
<A NAME="1471">&#160;</A> <PRE>DWORD MIDASgetOption(int option)</PRE>
<P>
Gets a MIDAS option.
<P>
<H3><A NAME="SECTION00335100000000000000">Input</A></H3>
<P>
<DL ><DT><STRONG>option</STRONG>
<DD> Option number (see <TT>enum</TT>
        <A HREF="node6.html#MIDASoptions">MIDASoptions</A> above)
<P>
</DL><H3><A NAME="SECTION00335200000000000000">Description</A></H3>
<P>
This function reads the current value of a MIDAS option. The different number
codes for different options are described above.
<P>
<H3><A NAME="SECTION00335300000000000000">Return value</A></H3>
<P>
TRUE if successful, FALSE if not.
<P>
<H3><A NAME="SECTION00335400000000000000">Operating systems</A></H3>
<P>
All
<P>
<H3><A NAME="SECTION00335500000000000000">See also</A></H3>
<P>
<A HREF="node8.html#MIDASsetOption">MIDASsetOption</A>
<P>
<BR> <HR><A NAME="MIDASinit">&#160;</A><H2><A NAME="SECTION00336000000000000000">2.3.6 MIDASinit</A></H2>
<A NAME="1483">&#160;</A> <PRE>BOOL MIDASinit(void)</PRE>
<P>
Initializes MIDAS Digital Audio System.
<P>
<H3><A NAME="SECTION00336100000000000000">Input</A></H3>
<P>
None.
<P>
<H3><A NAME="SECTION00336200000000000000">Description</A></H3>
<P>
This function initializes all MIDAS Digital Audio System components, and sets
up the API. Apart from configuration functions, this function must be called
before any other MIDAS functions are used.
<P>
If this function fails with no apparent reason, it is very probable that some
other application is using the sound card hardware or the user has badly
mis-configured MIDAS. Therefore, if this function fails, it is recommended to
give the user a possibility to close other applications and retry, continue
with no sound (set option
<A HREF="node6.html#MIDASoptions">MIDAS_OPTION_FORCE_NO_SOUND</A>), or
possibly re-configure MIDAS.
<P>
<H3><A NAME="SECTION00336300000000000000">Return value</A></H3>
<P>
TRUE if successful, FALSE if not.
<P>
<H3><A NAME="SECTION00336400000000000000">Operating systems</A></H3>
<P>
All
<P>
<H3><A NAME="SECTION00336500000000000000">See also</A></H3>
<P>
<A HREF="node8.html#MIDASsetOption">MIDASsetOption</A>, <A HREF="node8.html#MIDASclose">MIDASclose</A>
<P>
<BR> <HR><A NAME="MIDASloadConfig">&#160;</A><H2><A NAME="SECTION00337000000000000000">2.3.7 MIDASloadConfig</A></H2>
<A NAME="1502">&#160;</A> <PRE>BOOL MIDASloadConfig(char *fileName)</PRE>
<P>
Load MIDAS setup from disk.
<P>
<H3><A NAME="SECTION00337100000000000000">Input</A></H3>
<P>
<DL ><DT><STRONG>fileName</STRONG>
<DD> Setup file name
<P>
</DL><H3><A NAME="SECTION00337200000000000000">Description</A></H3>
<P>
This function loads MIDAS setup from disk. The setup must have been
saved with <A HREF="node8.html#MIDASsaveConfig">MIDASsaveConfig</A>. <A HREF="node8.html#MIDASsetOption">MIDASsetOption</A> can be
used afterwards to change, for example, the output mode.
<P>
This function must be called before <A HREF="node8.html#MIDASinit">MIDASinit</A>, but after
<A HREF="node8.html#MIDASstartup">MIDASstartup</A>.
<P>
<H3><A NAME="SECTION00337300000000000000">Return value</A></H3>
<P>
TRUE if successful, FALSE if not.
<P>
<H3><A NAME="SECTION00337400000000000000">Operating systems</A></H3>
<P>
MS-DOS, Win32
<P>
<H3><A NAME="SECTION00337500000000000000">See also</A></H3>
<P>
<A HREF="node8.html#MIDASconfig">MIDASconfig</A>, <A HREF="node8.html#MIDASsaveConfig">MIDASsaveConfig</A>
<P>
<BR> <HR><A NAME="MIDASreadConfigRegistry">&#160;</A><H2><A NAME="SECTION00338000000000000000">2.3.8 MIDASreadConfigRegistry</A></H2>
<A NAME="1529">&#160;</A> <PRE>BOOL MIDASreadConfigRegistry(DWORD key, char *subKey);</PRE>
<P>
Reads MIDAS configuration from a registry key.
<P>
<H3><A NAME="SECTION00338100000000000000">Input</A></H3>
<P>
<DL ><DT><STRONG>key</STRONG>
<DD> A currently open registry key, for example 
        <B>H_KEY_CURRENT_USER</B>
    <DT><STRONG>subKey</STRONG>
<DD> The name of the subkey of <B>key</B> that contains the
        configuration
<P>
</DL><H3><A NAME="SECTION00338200000000000000">Description</A></H3>
<P>
This function reads the MIDAS configuration from a registry key. The
configuration must have been written there with
<A HREF="node8.html#MIDASwriteConfigRegistry">MIDASwriteConfigRegistry</A>. <A HREF="node8.html#MIDASsetOption">MIDASsetOption</A> can be used
afterwards to chance, for example, the output mode, and <A HREF="node8.html#MIDASconfig">MIDASconfig</A>
to prompt the user for new settings.
<P>
This function must be called before <A HREF="node8.html#MIDASinit">MIDASinit</A>, but after
<A HREF="node8.html#MIDASstartup">MIDASstartup</A>.
<P>
<H3><A NAME="SECTION00338300000000000000">Return value</A></H3>
<P>
TRUE if successful, FALSE if not.
<P>
<H3><A NAME="SECTION00338400000000000000">Operating systems</A></H3>
<P>
Win32
<P>
<H3><A NAME="SECTION00338500000000000000">See also</A></H3>
<P>
<A HREF="node8.html#MIDASconfig">MIDASconfig</A>, <A HREF="node8.html#MIDASwriteConfigRegistry">MIDASwriteConfigRegistry</A>
<P>
<BR> <HR><A NAME="MIDASsaveConfig">&#160;</A><H2><A NAME="SECTION00339000000000000000">2.3.9 MIDASsaveConfig</A></H2>
<A NAME="1565">&#160;</A> <PRE>BOOL MIDASsaveConfig(char *fileName)</PRE>
<P>
Saves the MIDAS setup to a file.
<P>
<H3><A NAME="SECTION00339100000000000000">Input</A></H3>
<P>
<DL ><DT><STRONG>fileName</STRONG>
<DD> Setup file name
<P>
</DL><H3><A NAME="SECTION00339200000000000000">Description</A></H3>
<P>
This function saves the MIDAS setup entered with <A HREF="node8.html#MIDASconfig">MIDASconfig</A>
to a file on disk. It can be then loaded with <A HREF="node8.html#MIDASloadConfig">MIDASloadConfig</A>.
<P>
<H3><A NAME="SECTION00339300000000000000">Return value</A></H3>
<P>
TRUE if successful, FALSE if not.
<P>
<H3><A NAME="SECTION00339400000000000000">Operating systems</A></H3>
<P>
MS-DOS, Win32
<P>
<H3><A NAME="SECTION00339500000000000000">See also</A></H3>
<P>
<A HREF="node8.html#MIDASconfig">MIDASconfig</A>, <A HREF="node8.html#MIDASloadConfig">MIDASloadConfig</A>
<P>
<BR> <HR><A NAME="MIDASsetOption">&#160;</A><H2><A NAME="SECTION003310000000000000000">2.3.10 MIDASsetOption</A></H2>
<A NAME="1584">&#160;</A> <PRE>BOOL MIDASsetOption(int option, DWORD value)</PRE>
<P>
Sets a MIDAS option.
<P>
<H3><A NAME="SECTION003310100000000000000">Input</A></H3>
<P>
<DL ><DT><STRONG>option</STRONG>
<DD> Option number (see <TT>enum</TT>
        <A HREF="node6.html#MIDASoptions">MIDASoptions</A> above)
    <DT><STRONG>value</STRONG>
<DD> New value for option
<P>
</DL><H3><A NAME="SECTION003310200000000000000">Description</A></H3>
<P>
This function sets a value to a MIDAS option. The different number codes for
different options are described above. All MIDAS configuration options must
be set with this function <B>before</B> <A HREF="node8.html#MIDASinit">MIDASinit</A> is called.
<P>
<H3><A NAME="SECTION003310300000000000000">Return value</A></H3>
<P>
TRUE if successful, FALSE if not.
<P>
<H3><A NAME="SECTION003310400000000000000">Operating systems</A></H3>
<P>
All
<P>
<H3><A NAME="SECTION003310500000000000000">See also</A></H3>
<P>
<A HREF="node8.html#MIDASinit">MIDASinit</A>
<P>
<BR> <HR><A NAME="MIDASstartup">&#160;</A><H2><A NAME="SECTION003311000000000000000">2.3.11 MIDASstartup</A></H2>
<A NAME="1600">&#160;</A> <PRE>BOOL MIDASstartup(void)</PRE>
<P>
Prepares MIDAS Digital Audio System for initialization and use.
<P>
<H3><A NAME="SECTION003311100000000000000">Input</A></H3>
<P>
None.
<P>
<H3><A NAME="SECTION003311200000000000000">Description</A></H3>
<P>
This function sets all MIDAS Digital Audio System configuration variables to
default values and prepares MIDAS for use. It must be called before any other
MIDAS function, including <A HREF="node8.html#MIDASinit">MIDASinit</A> and <A HREF="node8.html#MIDASsetOption">MIDASsetOption</A>, is
called. After this function has been called, <A HREF="node8.html#MIDASclose">MIDASclose</A> can be
safely called at any point and any number of times, regardless of whether
MIDAS has been initialized or not. After calling this function, you can use
<A HREF="node8.html#MIDASsetOption">MIDASsetOption</A> to change MIDAS configuration before initializing
MIDAS with <A HREF="node8.html#MIDASinit">MIDASinit</A>, or call <A HREF="node8.html#MIDASconfig">MIDASconfig</A> to prompt the
user for configuration options.
<P>
<H3><A NAME="SECTION003311300000000000000">Return value</A></H3>
<P>
TRUE if successful, FALSE if not.
<P>
<H3><A NAME="SECTION003311400000000000000">Operating systems</A></H3>
<P>
All
<P>
<H3><A NAME="SECTION003311500000000000000">See also</A></H3>
<P>
<A HREF="node8.html#MIDASsetOption">MIDASsetOption</A>, <A HREF="node8.html#MIDASinit">MIDASinit</A>, <A HREF="node8.html#MIDASclose">MIDASclose</A>
<P>
<BR> <HR><A NAME="MIDASwriteConfigRegistry">&#160;</A><H2><A NAME="SECTION003312000000000000000">2.3.12 MIDASwriteConfigRegistry</A></H2>
<A NAME="1639">&#160;</A> <PRE>BOOL MIDASwriteConfigRegistry(DWORD key, char *subKey);</PRE>
<P>
Writes the MIDAS configuration to a registry key.
<P>
<H3><A NAME="SECTION003312100000000000000">Input</A></H3>
<P>
<DL ><DT><STRONG>key</STRONG>
<DD> A currently open registry key, for example 
        <B>H_KEY_CURRENT_USER</B>
    <DT><STRONG>subKey</STRONG>
<DD> The name of the subkey of <B>key</B> where the
        configuration will be written. They key does not need to exist.
<P>
</DL><H3><A NAME="SECTION003312200000000000000">Description</A></H3>
<P>
This function saves the current MIDAS configuration, usually entered with
<A HREF="node8.html#MIDASconfig">MIDASconfig</A> to a registry key. The configuration can then be read
with <A HREF="node8.html#MIDASreadConfigRegistry">MIDASreadConfigRegistry</A>.
<P>
<H3><A NAME="SECTION003312300000000000000">Return value</A></H3>
<P>
TRUE if successful, FALSE if not.
<P>
<H3><A NAME="SECTION003312400000000000000">Operating systems</A></H3>
<P>
Win32
<P>
<H3><A NAME="SECTION003312500000000000000">See also</A></H3>
<P>
<A HREF="node8.html#MIDASconfig">MIDASconfig</A>, <A HREF="node8.html#MIDASreadConfigRegistry">MIDASreadConfigRegistry</A>
<P>
<HR><A NAME="tex2html330" HREF="node9.html"><IMG WIDTH=37 HEIGHT=24 ALIGN=BOTTOM ALT="next" SRC="../icons/next_motif.gif"></A> <A NAME="tex2html328" HREF="node5.html"><IMG WIDTH=26 HEIGHT=24 ALIGN=BOTTOM ALT="up" SRC="../icons/up_motif.gif"></A> <A NAME="tex2html324" HREF="node7.html"><IMG WIDTH=63 HEIGHT=24 ALIGN=BOTTOM ALT="previous" SRC="../icons/previous_motif.gif"></A> <A NAME="tex2html332" HREF="node1.html"><IMG WIDTH=65 HEIGHT=24 ALIGN=BOTTOM ALT="contents" SRC="../icons/contents_motif.gif"></A>  <BR>
<B> Next:</B> <A NAME="tex2html331" HREF="node9.html">3 System control</A>
<B>Up:</B> <A NAME="tex2html329" HREF="node5.html">2 Configurationinitialization and </A>
<B> Previous:</B> <A NAME="tex2html325" HREF="node7.html">7.2 Data types</A>
<P><ADDRESS>
<I>Petteri Kangaslampi <BR>
Sun Mar  1 22:15:08 EET 1998</I>
</ADDRESS>
</BODY>
</HTML>
