<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<!--Converted with LaTeX2HTML 96.1-h (September 30, 1996) by Nikos Drakos (nikos@cbl.leeds.ac.uk), CBLU, University of Leeds -->
<HTML>
<HEAD>
<TITLE>2.3 Linking with MIDAS</TITLE>
<META NAME="description" CONTENT="2.3 Linking with MIDAS">
<META NAME="keywords" CONTENT="prgguide">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<LINK REL=STYLESHEET HREF="prgguide.css">
</HEAD>
<BODY LANG="EN" >
 <A NAME="tex2html183" HREF="node9.html"><IMG WIDTH=37 HEIGHT=24 ALIGN=BOTTOM ALT="next" SRC="../icons/next_motif.gif"></A> <A NAME="tex2html181" HREF="node5.html"><IMG WIDTH=26 HEIGHT=24 ALIGN=BOTTOM ALT="up" SRC="../icons/up_motif.gif"></A> <A NAME="tex2html175" HREF="node7.html"><IMG WIDTH=63 HEIGHT=24 ALIGN=BOTTOM ALT="previous" SRC="../icons/previous_motif.gif"></A> <A NAME="tex2html185" HREF="node1.html"><IMG WIDTH=65 HEIGHT=24 ALIGN=BOTTOM ALT="contents" SRC="../icons/contents_motif.gif"></A>  <BR>
<B> Next:</B> <A NAME="tex2html184" HREF="node9.html">2.4 Using MIDAS from </A>
<B>Up:</B> <A NAME="tex2html182" HREF="node5.html">2 Getting started</A>
<B> Previous:</B> <A NAME="tex2html176" HREF="node7.html">2.2 Compiling with MIDAS</A>
<BR> <P>
<H1><A NAME="SECTION00330000000000000000">2.3 Linking with MIDAS</A></H1>
<P>
If your program uses MIDAS Digital Audio System, you naturally need to
link with the MIDAS libraries as well. This section describes how to
do that on each platform supported.
<P>
All MIDAS Digital Audio System libraries are stored under the
<TT>lib/</TT> subdirectory in the distribution. <TT>lib/</TT>
contains a subdirectory for each supported platform, and those in turn
contain directories for each supported compiler. The format of the
compiler directory names is ``&lt;compiler&gt;&lt;build&gt;'', where &lt;compiler&gt; is
a two-letter abbreviation for the compiler name, and &lt;build&gt; the
library build type -- retail or debug. Under most circumstances, you
should use the retail versions of the libraries, as they contain
better optimized code. Also, the debug libraries are not included in
all releases.
<P>
For example, <TT>lib/win32/vcretail/midas.lib</TT> is the retail
build of the Win32 Visual C/C++ static library.
<P>
<H2><A NAME="SECTION00331000000000000000">2.3.1 Windows NT/95</A></H2>
<P>
Under the Win32 platform, applications can link with MIDAS Digital
Audio System either statically or dynamically. Unless there is a
specific need to link with MIDAS statically, dynamic linking is
recommended. Delphi users need to use dynamic linking always.
<P>
When linking with MIDAS statically, simply link with the library file
corresponding to your development platform. For Watcom C/C++, the
library is <TT>lib/win32/wcretail/midas.lib</TT>, and for Visual
C/C++ <TT>lib/win32/vcretail/midas.lib</TT>.  Depending on your
configuration, you may need to add the library directory to your
``library paths'' list. When MIDAS is linked into the application
statically, the .exe is self-contained and no MIDAS <TT>.dll</TT>
files are needed.
<P>
Dynamic linking is done by linking with the appropriate MIDAS import
library instead of the static linking library. In addition, the MIDAS
Dynamic Link Library (<TT>midasXX.dll</TT>) needs to be placed in a
suitable directory -- either to the same directory with the program
executable, or in some directory in the user's PATH. The import
libraries are stored in the same directory with the static libraries,
but the file name is <TT>midasdll.lib</TT>. For example, Visual C
users should link with
<TT>lib/win32/vcretail/midasdll.lib</TT>. The MIDAS Dynamic Link
Libraries are stored in <TT>lib/win32/retail</TT> and
<TT>lib/win32/debug</TT>.
<P>
Delphi users do not need a separate import library -- using the interface
unit <TT>midasdll.pas</TT> adds the necessary references to the
<TT>.dll</TT> automatically. Note that running the program under the
Delphi IDE without the <TT>.dll</TT> available can cause strange error
messages.
<P>
<H2><A NAME="SECTION00332000000000000000">MS-DOS</A></H2>
<P>
As MS-DOS doesn't support dynamic linking, only a static link library is
provided for MS-DOS. You'll simply need to link with the library from the
appropriate subdirectory -- usually <TT>lib/dos/gcretail</TT> for GCC
(DJGPP) and <TT>lib/dos/wcretail</TT> for Watcom C. The executable is fully
self-contained, and no additional files are needed. DJGPP users also need to
link with the Allegro library, as MIDAS uses some of its functions for IRQ
handling.
<P>
Note that some versions of the Watcom Linker are not case-sensitive by
default, and you'll need to use case-sensitive linking with MIDAS. To do that,
simply add <TT>option caseexact</TT> to your linker directives.
<P>
<H2><A NAME="SECTION00333000000000000000">2.3.3 Linux</A></H2>
<P>
For Linux, only a static library is provided for the time being. To link your
program with MIDAS Digital Audio System, add the proper library directory
(usually <TT>lib/linux/gcretail</TT>) to your library directory list (gcc
option <TT>-L</TT>), and link the library in using the GCC option
<TT>-lmidas</TT>.
<P>
<HR><A NAME="tex2html183" HREF="node9.html"><IMG WIDTH=37 HEIGHT=24 ALIGN=BOTTOM ALT="next" SRC="../icons/next_motif.gif"></A> <A NAME="tex2html181" HREF="node5.html"><IMG WIDTH=26 HEIGHT=24 ALIGN=BOTTOM ALT="up" SRC="../icons/up_motif.gif"></A> <A NAME="tex2html175" HREF="node7.html"><IMG WIDTH=63 HEIGHT=24 ALIGN=BOTTOM ALT="previous" SRC="../icons/previous_motif.gif"></A> <A NAME="tex2html185" HREF="node1.html"><IMG WIDTH=65 HEIGHT=24 ALIGN=BOTTOM ALT="contents" SRC="../icons/contents_motif.gif"></A>  <BR>
<B> Next:</B> <A NAME="tex2html184" HREF="node9.html">2.4 Using MIDAS from </A>
<B>Up:</B> <A NAME="tex2html182" HREF="node5.html">2 Getting started</A>
<B> Previous:</B> <A NAME="tex2html176" HREF="node7.html">2.2 Compiling with MIDAS</A>
<P><ADDRESS>
<I>Petteri Kangaslampi <BR>
Sun Mar  1 22:25:31 EET 1998</I>
</ADDRESS>
</BODY>
</HTML>
